
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MapReduce, 大数据处理的基石</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'v1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="入门最后一站: OSX 搭建 Hadoop 开发环境" href="yarn_debug.html" />
    <link rel="prev" title="Hadoop 2.8.0 半自动化安装" href="hadoop_install.html" />
<meta name="viewport" content="width=device-width"></meta>
	<link rel="alternate"
		type="application/rss+xml"
		title="Taoge Blog"
		href="/index.rss" />
		<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-69141957-1', 'auto');
		ga('send', 'pageview');
		</script>
		<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-KVT8TRH');</script>
<!-- End Google Tag Manager -->


		<script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<script>
  (adsbygoogle = window.adsbygoogle || []).push({
    google_ad_client: "ca-pub-9422289764825717",
    enable_page_level_ads: true
  });
</script>


<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-KVT8TRH"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<!-- End Google Tag Manager (noscript) -->



	
  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mapreduce">
<h1>MapReduce, 大数据处理的基石<a class="headerlink" href="#mapreduce" title="Permalink to this headline">¶</a></h1>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">keywords:</th><td class="field-body">hadoop MapReduce</td>
</tr>
</tbody>
</table>
<div class="section" id="id1">
<h2>为什么我们需要 MapReduce ？<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">每当我看见长城时，总不免心生感慨，这得需要多少人多少年才能完成这么大的工程啊！</div>
<div class="line">然而，长城建造伊始，并不是一开始就连起来的，而是一小段一小段的拼接而成。</div>
<div class="line">这种分而治之的思想，在我们学习归并排序的时候，就应熟稔于心。</div>
<div class="line">同样的，在每一刻，对互联网企业（现在还有什么面向终端消费者的企业没有搭上互联网呢？）来说，客户都会产生大量的数据。而且是非结构化的，不是一般 Excel 小能手就能解决的。</div>
<div class="line">这时候，我们就需要一个并行的，批处理的数据处理。</div>
<div class="line">MapReduce 应运而生。</div>
</div>
</div>
<div class="section" id="hadoop-mapreduce-work">
<h2>Hadoop 的 MapReduce 是怎么 Work 的 ?<a class="headerlink" href="#hadoop-mapreduce-work" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">上篇说到，Hdfs 是大数据的基石（存储）。而 MapReduce 则是运行其上的灵魂，是从无序中建造有序。</div>
<div class="line">那 Hadoop 是怎么完成这一任务的？</div>
<div class="line">欢迎来到大数据汉堡结构的倒数第二层，数据处理层。</div>
<div class="line">让我们一起看看 Yarn (Yet Another Resource Negotiator) 的齿轮是如何运转的吧。</div>
<div class="line">Yarn 的设计理念，在于把资源管理和任务管理分开。相当于一个公司，有管理部门和业务部门。</div>
<div class="line">所以业务部门是任劳任怨的，管理部门有分配不公的可能性。</div>
<div class="line">Yarn 资源管理节点是 Resource Manager, 业务管理节点是 NodeManager 。</div>
<div class="line">举个例子来说明 Yarn 是如何工作的吧。</div>
<div class="line">假如，现在股东（公司在资本市场都是为股东工作的），要求公司提高业绩。这个时候管理(Resource Manager)部门，也就是一群拍脑袋的家伙，算出需要多少资源，分配给了业务部门。</div>
<div class="line">业务管理部门(Node Manager)也是有小老板的，小老板立刻招了几个实习生成立了项目组(Application Master) 。</div>
<div class="line">项目组再规划出完成这件事，需要先切分成几个小任务(Task)，分配给几个临时工。等这个项目完成了。项目组解散了。连五险一金都不用交，真是万事大吉。</div>
<div class="line">来看个高清大图吧:</div>
</div>
<a class="reference internal image-reference" href="../_images/yarn_archi.png"><img alt="../_images/yarn_archi.png" src="../_images/yarn_archi.png" style="width: 450px; height: 450px;" /></a>
</div>
<div class="section" id="yarn">
<h2>Yarn 启动<a class="headerlink" href="#yarn" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">鉴于俺的电脑内存有限，没有闲钱加大我的内存，加大带宽。只能把 3 台虚拟机 改成 2 台了。</div>
<div class="line">Yarn 有两个节点，分别是 <cite>Resource Manager</cite>: 10.10.10.1 , <cite>Node Manager</cite>: 10.10.10.2 。</div>
<div class="line">Resource Manager 节点用默认配置，不需要改东西。</div>
<div class="line">Node Manager 需要 配置 yarn-site.xml 和 mapred-site.xml 。</div>
</div>
<p><strong>Node Manager</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">yarn</span><span class="o">-</span><span class="n">site</span><span class="o">.</span><span class="n">xml</span> <span class="p">(</span><span class="n">需要指定一下</span> <span class="n">resource</span> <span class="n">manager</span> <span class="n">的主机</span><span class="p">)</span>

        <span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">property</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">yarn</span><span class="o">.</span><span class="n">resourcemanager</span><span class="o">.</span><span class="n">hostname</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">hadoop</span><span class="o">-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>


<span class="n">mapred</span><span class="o">-</span><span class="n">site</span><span class="o">.</span><span class="n">xml</span> <span class="p">(</span><span class="n">只需要设置调度框架为</span> <span class="n">yarn</span><span class="p">)</span>

    <span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">property</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">mapreduce</span><span class="o">.</span><span class="n">framework</span><span class="o">.</span><span class="n">name</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">yarn</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">在 hadoop-1 节点启动 Resource Manager : <cite>yarn resourcemanager</cite></div>
<div class="line">在 hadoop-2 节点启动 Node Manager : <cite>yarn nodemanager</cite></div>
</div>
</div>
<div class="section" id="id2">
<h2>现在来运行你的第一个数字数的程序吧！<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">代码在 <a class="reference external" href="https://hadoop.apache.org/docs/r2.8.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html">https://hadoop.apache.org/docs/r2.8.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html</a></div>
</div>
<dl class="docutils">
<dt><strong>Reference</strong>:</dt>
<dd>Hadoop:The Definitive Guide, 4th Edition</dd>
</dl>
<p class="feed-meta">Published by <em class="feed-author">yowenter</em> on <em class="feed-date">2017-05-05</em></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Y f = f (Y f)</a></h1>



<p class="blurb">Taoge 胡思乱想的地方。</p>







        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2018, Taoge.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/hadoop/map_reduce.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>