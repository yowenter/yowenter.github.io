
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>MapReduce, 大数据处理的基石 &#8212; Taoge</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     'v0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="入门最后一站: OSX 搭建 Hadoop 开发环境" href="yarn_debug.html" />
    <link rel="prev" title="Hadoop 2.8.0 半自动化安装" href="hadoop_install.html" />
<meta name="viewport" content="width=device-width"></meta>
	<link rel="alternate"
		type="application/rss+xml"
		title="Taoge Blog"
		href="/index.rss" />
		<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-69141957-1', 'auto');
		ga('send', 'pageview');
		</script>
		<script>(function(i,s,o,g,r,a,m){i["DaoVoiceObject"]=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;a.charset="utf-8";m.parentNode.insertBefore(a,m)})(window,document,"script",('https:' == document.location.protocol ? 'https:' : 'http:') + "//widget.daovoice.io/widget/22190fee.js","daovoice")
		daovoice('init', {
		app_id: "22190fee"
		});
		daovoice('update');
		</script>

	
  </head>
  <body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="mapreduce">
<h1>MapReduce, 大数据处理的基石<a class="headerlink" href="#mapreduce" title="Permalink to this headline">¶</a></h1>
<div class="section" id="id1">
<h2>为什么我们需要 MapReduce ？<a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">每当我看见长城时，总不免心生感慨，这得需要多少人多少年才能完成这么大的工程啊！</div>
<div class="line">然而，长城建造伊始，并不是一开始就连起来的，而是一小段一小段的拼接而成。</div>
<div class="line">这种分而治之的思想，在我们学习归并排序的时候，就应熟稔于心。</div>
<div class="line">同样的，在每一刻，对互联网企业（现在还有什么面向终端消费者的企业没有搭上互联网呢？）来说，客户都会产生大量的数据。而且是非结构化的，不是一般 Excel 小能手就能解决的。</div>
<div class="line">这时候，我们就需要一个并行的，批处理的数据处理。</div>
<div class="line">MapReduce 应运而生。</div>
</div>
</div>
<div class="section" id="hadoop-mapreduce-work">
<h2>Hadoop 的 MapReduce 是怎么 Work 的 ?<a class="headerlink" href="#hadoop-mapreduce-work" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">上篇说到，Hdfs 是大数据的基石（存储）。而 MapReduce 则是运行其上的灵魂，是从无序中建造有序。</div>
<div class="line">那 Hadoop 是怎么完成这一任务的？</div>
<div class="line">欢迎来到大数据汉堡结构的倒数第二层，数据处理层。</div>
<div class="line">让我们一起看看 Yarn (Yet Another Resource Negotiator) 的齿轮是如何运转的吧。</div>
<div class="line">Yarn 的设计理念，在于把资源管理和任务管理分开。相当于一个公司，有管理部门和业务部门。</div>
<div class="line">所以业务部门是任劳任怨的，管理部门有分配不公的可能性。</div>
<div class="line">Yarn 资源管理节点是 Resource Manager, 业务管理节点是 NodeManager 。</div>
<div class="line">举个例子来说明 Yarn 是如何工作的吧。</div>
<div class="line">假如，现在股东（公司在资本市场都是为股东工作的），要求公司提高业绩。这个时候管理(Resource Manager)部门，也就是一群拍脑袋的家伙，算出需要多少资源，分配给了业务部门。</div>
<div class="line">业务管理部门(Node Manager)也是有小老板的，小老板立刻招了几个实习生成立了项目组(Application Master) 。</div>
<div class="line">项目组再规划出完成这件事，需要先切分成几个小任务(Task)，分配给几个临时工。等这个项目完成了。项目组解散了。连五险一金都不用交，真是万事大吉。</div>
<div class="line">来看个高清大图吧:</div>
</div>
<a class="reference internal image-reference" href="../_images/yarn_archi.png"><img alt="../_images/yarn_archi.png" src="../_images/yarn_archi.png" style="width: 450px; height: 450px;" /></a>
</div>
<div class="section" id="yarn">
<h2>Yarn 启动<a class="headerlink" href="#yarn" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">鉴于俺的电脑内存有限，没有闲钱加大我的内存，加大带宽。只能把 3 台虚拟机 改成 2 台了。</div>
<div class="line">Yarn 有两个节点，分别是 <cite>Resource Manager</cite>: 10.10.10.1 , <cite>Node Manager</cite>: 10.10.10.2 。</div>
<div class="line">Resource Manager 节点用默认配置，不需要改东西。</div>
<div class="line">Node Manager 需要 配置 yarn-site.xml 和 mapred-site.xml 。</div>
</div>
<p><strong>Node Manager</strong>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">yarn</span><span class="o">-</span><span class="n">site</span><span class="o">.</span><span class="n">xml</span> <span class="p">(</span><span class="n">需要指定一下</span> <span class="n">resource</span> <span class="n">manager</span> <span class="n">的主机</span><span class="p">)</span>

        <span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">property</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">yarn</span><span class="o">.</span><span class="n">resourcemanager</span><span class="o">.</span><span class="n">hostname</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">hadoop</span><span class="o">-</span><span class="mi">1</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>


<span class="n">mapred</span><span class="o">-</span><span class="n">site</span><span class="o">.</span><span class="n">xml</span> <span class="p">(</span><span class="n">只需要设置调度框架为</span> <span class="n">yarn</span><span class="p">)</span>

    <span class="o">&lt;</span><span class="n">configuration</span><span class="o">&gt;</span>
            <span class="o">&lt;</span><span class="nb">property</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">name</span><span class="o">&gt;</span><span class="n">mapreduce</span><span class="o">.</span><span class="n">framework</span><span class="o">.</span><span class="n">name</span><span class="o">&lt;/</span><span class="n">name</span><span class="o">&gt;</span>
                    <span class="o">&lt;</span><span class="n">value</span><span class="o">&gt;</span><span class="n">yarn</span><span class="o">&lt;/</span><span class="n">value</span><span class="o">&gt;</span>
            <span class="o">&lt;/</span><span class="nb">property</span><span class="o">&gt;</span>
        <span class="o">&lt;/</span><span class="n">configuration</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="line-block">
<div class="line">在 hadoop-1 节点启动 Resource Manager : <cite>yarn resourcemanager</cite></div>
<div class="line">在 hadoop-2 节点启动 Node Manager : <cite>yarn nodemanager</cite></div>
</div>
</div>
<div class="section" id="id2">
<h2>现在来运行你的第一个数字数的程序吧！<a class="headerlink" href="#id2" title="Permalink to this headline">¶</a></h2>
<div class="line-block">
<div class="line">代码在 <a class="reference external" href="https://hadoop.apache.org/docs/r2.8.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html">https://hadoop.apache.org/docs/r2.8.0/hadoop-mapreduce-client/hadoop-mapreduce-client-core/MapReduceTutorial.html</a></div>
</div>
<dl class="docutils">
<dt><strong>Reference</strong>:</dt>
<dd>Hadoop:The Definitive Guide, 4th Edition</dd>
</dl>
<p class="feed-meta">Published by <em class="feed-author">yowenter</em> on <em class="feed-date">2017-05-05</em></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo.png" alt="Logo"/>
    
  </a>
</p>



<p class="blurb">Taoge's thoughts about programming, life and everything</p>




<p>
<iframe src="https://ghbtns.com/github-btn.html?user=yowenter&repo=yowenter.github.io&type=follow&count=False&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../travel/thailand_2017_06_15.html">大象国游记 1⃣️</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ml/machine_learning_notes.html">Andrew.Ng 机器学习笔记</a></li>
<li class="toctree-l1"><a class="reference internal" href="../thoughts/information_management.html">沉迷混杂信息的你，正在被时间抹去</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../hadoop_intro.html">Hadoop 21天从入门到放弃</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="hadoop_install.html">Hadoop 2.8.0 半自动化安装</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">MapReduce, 大数据处理的基石</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">为什么我们需要 MapReduce ？</a></li>
<li class="toctree-l3"><a class="reference internal" href="#hadoop-mapreduce-work">Hadoop 的 MapReduce 是怎么 Work 的 ?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#yarn">Yarn 启动</a></li>
<li class="toctree-l3"><a class="reference internal" href="#id2">现在来运行你的第一个数字数的程序吧！</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="yarn_debug.html">入门最后一站: OSX 搭建 Hadoop 开发环境</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../thoughts/100_times_effective_programmer.html">百倍程序员的杠杆率和加速度</a></li>
<li class="toctree-l1"><a class="reference internal" href="../my_projects/search_job.html">我的光辉事业</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about_tech.html">我们程序员是如何让自己失业的</a></li>
<li class="toctree-l1"><a class="reference internal" href="../intercom_intro.html">如何使用 Intercom 用户运营</a></li>
<li class="toctree-l1"><a class="reference internal" href="../manage/time_manage.html">3 分钟学会时间管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="../recommend.html">推荐的订阅源</a></li>
<li class="toctree-l1"><a class="reference internal" href="../feed.html">Rss Feed</a></li>
<li class="toctree-l1"><a class="reference internal" href="../me.html">About Me</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Taoge.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.6.2</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/hadoop/map_reduce.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>